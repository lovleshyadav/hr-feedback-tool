(this.webpackJsonpgumnaam=this.webpackJsonpgumnaam||[]).push([[0],{356:function(e,t,a){e.exports=a(426)},421:function(e,t,a){},426:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),s=a.n(o),c=a(19),i=a.n(c),l=a(32),u=a(65),p=a(66),d=a(70),m=a(69),h=a(49),f=a(112),g=a.n(f),y=a(57),E=function(e){return{type:"GET_USER_FEEDBACK",payload:e}},v=function(e){return{type:"SELECTED_FEEDBACK",selectedFeedback:e}},b=function(e){return{type:"ADD_USER_HASH",userHash:e}},S=function(){return{type:"SIGN_IN"}},N=a(78),O=a(27);var j=function(e){var t=e.handleLogin,a=e.loggedIn,o=Object(n.useState)(""),s=Object(N.a)(o,2),c=s[0],i=s[1],l=Object(n.useState)(""),u=Object(N.a)(l,2),p=u[0],d=u[1];return a?r.a.createElement(O.Redirect,{push:!0,to:"/QueryListTable"}):r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"loginFormWrapper"},r.a.createElement("div",{className:"loginFormTitle"},"Login ",r.a.createElement("span",{className:"loginHelp"},"?")),r.a.createElement("div",{className:"loginForm"},r.a.createElement("form",{onSubmit:t.bind(this,c,p)},r.a.createElement("div",{className:"field"},r.a.createElement("span",null,"Username:"),r.a.createElement("input",{type:"text",id:"username",className:"input",placeholder:"",value:c,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("span",null,"Password:"),r.a.createElement("input",{type:"password",id:"password",className:"input",placeholder:"",value:p,onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"loginBtnWrapper"},r.a.createElement("button",{className:"loginBtn",disabled:!(c.length>0&&p.length>0)},"Login"))))),r.a.createElement("div",{className:"loginImg"}),r.a.createElement("div",{className:"loginDisclaimer"},"Disclaimer: ",r.a.createElement("p",null,"we do not store any information provided here and so we will not be able to retrive your account in case you forget your username and password so please keep it stored somewhere")))},w=a(232),x=a.n(w),k=a(458),q=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;console.log(this.props.querylist);var t=this.props.querylist.slice(0).reverse();return r.a.createElement(x.a,{icons:{Filter:function(){return r.a.createElement("span",{className:"material-icons MuiIcon-root MuiIcon-fontSizeSmall","aria-hidden":"true","aria-describedby":"mui-88980"},"search")}},title:"My Query List",data:t,columns:[{title:"Date Received",field:"date"},{title:"Incident Date",field:"incidentDate"},{title:"Location",field:"location"},{title:"Subject",field:"querySubject"},{title:"Message",field:"queryBody"},{title:"Sender Name",field:"userName"}],options:{exportButton:!0,actionsColumnIndex:-1},localization:{pagination:{labelDisplayedRows:"{from}-{to} of {count}"},toolbar:{nRowsSelected:"{0} row(s) selected"},header:{actions:""},body:{emptyDataSourceMessage:"No records to display",filterRow:{filterTooltip:"search"}}},actions:[{icon:"save",tooltip:"Save User",onClick:function(e,t){return alert("You saved "+t.name)}}],onRowClick:function(){var t=Object(l.a)(i.a.mark((function t(a,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.selectFeedback(n.id);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),components:{Action:function(t){return r.a.createElement(h.b,{to:{pathname:"/queryChatWindow",queryresponse:{response:e.props.query},userHash:e.props.userHash}},r.a.createElement(k.a,{color:"primary",variant:"contained",style:{textTransform:"none",color:"white",padding:"8px 14px",textAlign:"center",marginRight:"10px",marginBottom:"15px",marginTop:"10px",borderRadius:"10px",backgroundColor:"#144c92",fontSize:"13px",boxShadow:"0 0 57px rgba(0,0,0,0.13)",cursor:"pointer",border:"none"},size:"small"},"Go To Conversation"))}}})}}]),a}(n.Component),C=Object(y.b)((function(e){return{selectedFeedback:e.selectedFeedback}}),{selectFeedback:v})(q),H=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"loginBtnAndGetHashWrapper"},r.a.createElement(h.b,{to:"/gethash",className:"getHash"},"Get Hash"),r.a.createElement(h.b,{onClick:Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.logoutUser();case 2:case"end":return t.stop()}}),t)}))),className:"logoutBtn",to:{pathname:"/login"}},"Log out!")),r.a.createElement(B,{userHash:this.props.userHash}),r.a.createElement("div",{className:"queryList"},r.a.createElement(C,{querylist:this.props.querylist,userHash:this.props.userHash,toggleImportant:this.props.toggleImportant,toggleRead:this.props.toggleRead})))}}]),a}(n.Component);var B=function(e){var t=this;return r.a.createElement("div",{className:"NavBarWrapper"},r.a.createElement("div",{className:"NavBar",style:{display:"d82494f05d6917ba02f7aaa29689ccb444bb73f20380876cb05d1f37537b7892"===e.userHash?"none":"inline-flex"}},r.a.createElement(h.c,{className:"NavItems",to:"/sendquery",activeStyle:{color:"#fff",background:"#3c72a7"},render:function(e){return r.a.createElement(D,{redirect:!1})}},"Send Query"),r.a.createElement(h.c,{className:"NavItems",to:"/QueryListTable",activeStyle:{color:"#fff",background:"#3c72a7"},render:function(e){return r.a.createElement(H,Object.assign({},e,{querylist:t.state.querylist}))}},"My Query List")))};var D=function(e){var t=e.handleSendQuery,a=e.logoutUser,o=e.userHash,s=e.redirect,c=e.redirectUser,u=Object(n.useState)(""),p=Object(N.a)(u,2),d=p[0],m=p[1],f=Object(n.useState)(""),g=Object(N.a)(f,2),y=g[0],E=g[1],v=Object(n.useState)(""),b=Object(N.a)(v,2),S=b[0],j=b[1],w=Object(n.useState)(""),x=Object(N.a)(w,2),k=x[0],q=x[1],C=Object(n.useState)(""),H=Object(N.a)(C,2),D=H[0],U=H[1];return s?(c(),r.a.createElement(O.Redirect,{to:"/QueryListTable"})):r.a.createElement("div",null,r.a.createElement(h.b,{onClick:Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:case"end":return e.stop()}}),e)}))),className:"logoutBtn",to:{pathname:"/login"}},"Log out!"),r.a.createElement(B,{userHash:o}),r.a.createElement("div",{className:"SendQuery"},r.a.createElement("div",{className:"sendQueryTitle"},"Send Your Query!"),r.a.createElement("div",{className:"query"},r.a.createElement("div",{className:"formWrapper"},r.a.createElement("form",{onSubmit:t.bind(this,k,d,y,S,D)},r.a.createElement("div",{className:"field"},r.a.createElement("label",{for:"incidentDate"},"When did the incident occur?",r.a.createElement("span",{className:"impStar"},"*")," "),r.a.createElement("input",{type:"date",id:"incidentDate",name:"incidentDate",value:k,onChange:function(e){return q(e.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",id:"subject",className:"input",placeholder:"Subject (mandatory)",value:d,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{className:"field locationDropDown"},r.a.createElement("label",null,"Location:",r.a.createElement("span",{className:"impStar"},"*")," "),r.a.createElement("select",{name:"location",value:S,onChange:function(e){return function(e){j(e)}(e.target.value)}},r.a.createElement("option",{id:"blank"}),r.a.createElement("option",{id:"NYC"},"NYC"),r.a.createElement("option",{id:"LA"},"LA"),r.a.createElement("option",{id:"Tel Aviv"},"Tel Aviv"),r.a.createElement("option",{id:"Chicago"},"Chicago"),r.a.createElement("option",{id:"London"},"London"),r.a.createElement("option",{id:"Madrid"},"Madrid"),r.a.createElement("option",{id:"Paris"},"Paris"),r.a.createElement("option",{id:"Berlin"},"Berlin"),r.a.createElement("option",{id:"Mexico City"},"Mexico City"),r.a.createElement("option",{id:"S\xe3o Paulo"},"S\xe3o Paulo"),r.a.createElement("option",{id:"Seol"},"Seol"),r.a.createElement("option",{id:"Sydney"},"Sydney"),r.a.createElement("option",{id:"Shanghai"},"Shanghai"),r.a.createElement("option",{id:"Tokyo"},"Tokyo"),r.a.createElement("option",{id:"Beijing"},"Beijing"),r.a.createElement("option",{id:"New Delhi"},"New Delhi"),r.a.createElement("option",{id:"Bangkok"},"Bangkok"),r.a.createElement("option",{id:"Istanbul"},"Istanbul"),r.a.createElement("option",{id:"Seattle"},"Seattle"),r.a.createElement("option",{id:"Location not available"},"Choose not to answer"),r.a.createElement("option",{id:"Other"},"Other"))),r.a.createElement("div",{className:"field"},r.a.createElement("textarea",{id:"query",className:"input",placeholder:"Please describe the incident (mandatory)",value:y,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",id:"realusername",className:"input",placeholder:"Enter your name if you wish to identify yourself (optional)",value:D,onChange:function(e){return U(e.target.value)}})),r.a.createElement("div",{className:"sendQueryBtnWrapper"},r.a.createElement("button",{className:"sendQueryBtn",disabled:!(d.length>0&&y.length>0&&S.length>0&&k.length>0)},"Send!")))))))};var U=function(e){var t=e.userHash,a=e.queryresponse,o=e.addUserresponse,s=Object(n.useState)(""),c=Object(N.a)(s,2),i=c[0],l=c[1];return Object(y.c)((function(e){return e.feedbacks})),r.a.createElement("div",null,r.a.createElement("div",{className:"chatFormWrapper"},r.a.createElement("form",{onSubmit:o.bind(this,i,a.response.id,t)},r.a.createElement("div",{className:"field"},r.a.createElement("input",{id:"query",type:"text",className:"input",placeholder:"Type your reply here!",value:i,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"sendQueryChatBtnWrapper"},r.a.createElement("button",{className:"chatSendQueryBtn",disabled:!(i.length>0)})))))},I=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getStyleForChatWrapper=function(){return"normal"===e.props.response.user?{display:"flex",justifyContent:"flex-end",marginBottom:"10px"}:"admin"===e.props.response.user?{display:"flex",marginBottom:"10px"}:void 0},e.getStyleForChat=function(){return"normal"===e.props.response.user?{color:"#fff",fontSize:"15px",padding:"5px 10px",backgroundColor:"#3c72a7",borderRadius:"10px",float:"right",display:"flex",flexDirection:"column"}:"admin"===e.props.response.user?{color:"#fff",fontSize:"15px",padding:"5px 10px",backgroundColor:"#797979",borderRadius:"10px",float:"left",display:"flex",flexDirection:"column"}:void 0},e}return Object(p.a)(a,[{key:"render",value:function(){console.log(this.props.response);var e=this.props.response,t=e.response,a=e.time,n=e.date;return r.a.createElement("div",{className:"queryResponseWrapper",style:this.getStyleForChatWrapper()},r.a.createElement("div",{className:"queryResponse"},r.a.createElement("p",{style:this.getStyleForChat()},t,r.a.createElement("span",{className:"chatDateTime"},n," ",a))))}}]),a}(n.Component),L=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this;return this.props.queryresponse.response.response.map((function(t){return r.a.createElement(I,{response:t,userHash:e.props.userHash})}))}}]),a}(n.Component),T=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).queryresponse={response:{response:[{user:"normal",response:"No chat found yet, please contact the admin",date:"",time:""}]}},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this;if(this.props.location&&this.props.location.queryresponse&&(this.queryresponse=this.props.location.queryresponse),this.props.querylist.length>0){var t=this.props.querylist.find((function(t){return t.id===e.props.selectedFeedback}));this.queryresponse.response=t}return r.a.createElement("div",null,r.a.createElement(h.b,{onClick:Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.logoutUser();case 2:case"end":return t.stop()}}),t)}))),className:"logoutBtn",to:{pathname:"/login"}},"Log out!"),r.a.createElement("div",{className:"chatScreenWrapper"},r.a.createElement("div",{className:"backBtnWrapper"},r.a.createElement(h.b,{className:"backBtn",to:{pathname:"/QueryListTable",queryresponse:{response:this.props.query},userHash:this.props.userHash}},"Back")),r.a.createElement("div",{className:"queryChatWindow"},r.a.createElement(L,{queryresponse:this.queryresponse})),r.a.createElement(U,{userHash:this.props.userHash,queryresponse:this.queryresponse,addUserresponse:this.props.addUserresponse})))}}]),a}(n.Component),F=Object(y.b)((function(e){return{selectedFeedback:e.selectedFeedback}}),{})(T),_=function(e){return r.a.createElement("div",{className:"hashWrapper"},r.a.createElement("p",null,"Your Hash is: ",r.a.createElement("span",{className:"hash"},e.userHash)))},R=(a(421),a(344)),A=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loggedIn:!1,querylist:[],userHash:"",redirect:!1},e.callBackendAPI=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/getFeedbacks");case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,console.log(a),200===t.status){e.next=9;break}throw Error(a.message);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),e.toggleImportant=function(t){e.setState({querylist:e.state.querylist.map((function(e){return e.id===t&&(e.important=!e.important),e.id===t&&"important"===e.impBtnValue?e.impBtnValue="unimportant":e.id===t&&"unimportant"===e.impBtnValue&&(e.impBtnValue="important"),e}))})},e.toggleRead=function(t){e.setState({querylist:e.state.querylist.map((function(e){return e.id===t&&(e.read=!e.read),e.id===t&&"read"===e.readBtnValue?e.readBtnValue="unread":e.id===t&&"unread"===e.readBtnValue&&(e.readBtnValue="read"),e}))})},e.handleLogin=function(){var t=Object(l.a)(i.a.mark((function t(a,n,r){var o,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Object(R.sha256)(a+n),e.setState({userHash:o,loggedIn:!0}),s={userHash:o},e.props.isLoggedIn(),t.next=6,fetch("/getUserFeedbacks",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}).then(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.json());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var t=Object(l.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({querylist:a.data});case 2:return t.next=4,e.props.getUserFeedbacks(a.data);case 4:return t.next=6,e.props.addUserHash(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 6:r.preventDefault();case 7:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.handleSendQuery=function(){var t=Object(l.a)(i.a.mark((function t(a,n,r,o,s,c){var u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),u={incidentDate:a,subject:n,query:r,userHash:e.state.userHash,location:o,userName:s},t.next=4,fetch("/putFeedbacks",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(u)}).then(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.json());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var t=Object(l.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({querylist:a.data,redirect:!0});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(e,a,n,r,o,s){return t.apply(this,arguments)}}(),e.logoutUser=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({loggedIn:!1,querylist:[]});case 2:case"end":return t.stop()}}),t)}))),e.redirectUser=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({redirect:!1});case 2:case"end":return t.stop()}}),t)}))),e.addUserresponse=function(){var t=Object(l.a)(i.a.mark((function t(a,n,r,o){var s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.preventDefault(),s={userHash:r,queryId:n,response:a},fetch("/responseToQuery",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then(function(){var t=Object(l.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({querylist:a.data});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(g.a,{path:"/",exact:!0,component:function(){return r.a.createElement(j,{loggedIn:e.state.loggedIn,handleLogin:e.handleLogin})}}),r.a.createElement(g.a,{path:"/login",component:function(){return r.a.createElement(j,{loggedIn:e.state.loggedIn,handleLogin:e.handleLogin})}}),r.a.createElement(g.a,{path:"/sendquery",component:function(){return r.a.createElement(D,{redirectUser:e.redirectUser,logoutUser:e.logoutUser,userHash:e.state.userHash,handleSendQuery:e.handleSendQuery,redirect:e.state.redirect})}}),r.a.createElement(g.a,{path:"/QueryListTable",component:function(){return r.a.createElement(H,{logoutUser:e.logoutUser,querylist:e.state.querylist,userHash:e.state.userHash,toggleImportant:e.toggleImportant,toggleRead:e.toggleRead})}}),r.a.createElement(g.a,{path:"/queryChatWindow",component:function(){return r.a.createElement(F,{logoutUser:e.logoutUser,userHash:e.state.userHash,querylist:e.state.querylist,addUserresponse:e.addUserresponse})}}),r.a.createElement(g.a,{path:"/gethash",exact:!0,component:function(){return r.a.createElement(_,{userHash:e.state.userHash})}})))}}]),a}(n.Component),Q=Object(y.b)((function(e){return{}}),{addUserHash:b,isLoggedIn:S,getUserFeedbacks:E})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W=a(72),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_FEEDBACK":return t.payload;case"UPDATE_USER_RESPONSE":case"UPDATE_SELECTED_FEEDBACK":return!0;default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return!e;default:return e}},V=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SELECTED_FEEDBACK":return e.selectedFeedback;default:return-1}},G=function(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_USER_HASH":return e.userHash;default:return-2}},J=Object(W.c)({feedbacks:P,isLogged:M,currentUserHash:G,selectedFeedback:V});var z=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(a){return void console.log(a)}}(),K=Object(W.e)(J,z,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());K.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log(a)}}(K.getState())}));var Y=K;s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y.a,{store:Y},r.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[356,1,2]]]);
//# sourceMappingURL=main.7e1a711f.chunk.js.map